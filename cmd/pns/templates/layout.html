<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
{{$activeTagsURLs := .ActiveTagsURLs}}
<title>PNS{{with $activeTagsURLs}}:{{range .}} {{.Name}}{{end}}{{end}}</title>
<link type="text/css" rel="stylesheet" href="/_/static/style.css">
<link rel="stylesheet" href="/_/static/semantic.css" />
<link rel="stylesheet" href="/_/static/awesomplete.css" />
<link rel="icon" href="/_/static/favicon.png" />
<script src="/_/static/awesomplete.js"></script>
<script src="/_/static/pns.js" async></script>
<script>
noteIDs = {{.IDs}};
noteMap = {};
for (var i = 0; i < noteIDs.length; i++) {
	noteMap["note" + noteIDs[i]] = i;
}

allTags = {{.AllTags}};
activeTags = {{.ActiveTags}};
availableTags = {{.AvailableTags}};

function setup() {
	newAwesomplete(getLayoutCompletions);
}
</script>
</head>

<body class="body" onload="setup();" onkeydown="return noteKeyDown(event);">

<div class="ui borderless small top fixed menu">

<div class="left item">

<div class="small ui buttons">
{{range $activeTagsURLs}}
<a class="tagbar ui button" href="{{.URL}}">{{.Name}}</a>
{{end}}
</div>

{{if .Count}}<span class="pad-left{{if or (gt .Start 0) .More}} pad-right{{end}}">({{.Count}})</span>{{end}}

<div class="small ui buttons">
{{if gt .Start 0}}<a class="ui button" href="{{.PrevPage}}">&lt;</a>{{end}}
{{if .More}}<a class="ui button" href="{{.NextPage}}">&gt;</a>{{end}}
</div>

</div>

<div class="right item">

<form action="{{.URL}}" class="inline">
<div class="pad-right small ui input">
<input type="text" name="tag" id="tag" placeholder="Search..."
       data-multiple autofocus></input>
{{with .FTSQuery}}<input type="hidden" name="q" value="{{.}}">{{end}}
</div>
</form>

<form action="/_/add" class="inline">
<input type="submit" value="Add note" class="small ui button"></input>
</form>

<form action="/_/logout{{.URL}}" class="inline">
<input type="submit" value="Logout" class="small ui button"></input>
</form>

</div>

</div>

<div class="content">

{{range $n := .Notes}}
<a id="{{.ID}}" class="anchor"></a>
<div class="note" id="note{{.ID}}" tabindex="-1" >
{{$.Render .}}

{{if (not .NoFooter)}}
<div class="note-footer">

{{range .Topics}}
<a href="{{$.TagURL .}}" class="tag">{{.}}</a> ·
{{end}}

{{range .Tags}}
<a href="{{$.TagURL .}}" class="tag">{{.}}</a> ·
{{end}}

<span class="tag">
{{.Modified.Format "2006-01-02 15:04:05 -0700"}}
</span> ·

<span class="tag">
<a href="/_/edit/{{.ID}}" class="tag">Edit</a>
</span> ·

<span class="tag">
<a href="#{{.ID}}" class="tag">#</a>
</span> ·

<span class="tag">
<a href="/_/copy/{{.ID}}" class="tag">Copy</a>
</span>

</div>
{{end}}

</div>
{{end}}

</div>
</body>
</html>
